sap.ui.define(["jquery.sap.global"],function(jQuery){"use strict";return{callOData:function(e,r,s,t,n,o){return new Promise(function(a,i){var c=new Date;var u=o.getModel("local").getProperty("/CurrentUser");if(s==="POST"){n.CreatedBy=u;n.ChangedBy=u;n.CreatedOn=c;n.ChangedOn=c}else if(s==="PUT"){n.ChangedBy=u;n.ChangedOn=c}if(!(e&&r&&s)){i("Invalid parameters passed")}if(!t){t={}}e.setUseBatch(false);switch(s.toUpperCase()){case"GET":e.read(r,{async:true,filters:t.filters,sorters:t.sorters,success:function(e,r){a(e)},error:function(e){i(e)}});break;case"POST":e.create(r,n,{async:true,filters:t.filters,sorters:t.sorters,success:function(e,r){a(e)},error:function(e){i(e)}});break;case"PUT":e.update(r,n,{async:true,filters:t.filters,sorters:t.sorters,success:function(e,r){debugger;a(e)},error:function(e){debugger;i(e)}});break;case"DELETE":e.remove(r,{async:true,filters:t.filters,sorters:t.sorters,success:function(e,r){a(e)},error:function(e){i(e)}});break;default:jQuery.sap.log.error("No case matched");break}})},errorHandler:function(e,r){r.getView().setBusy(false);var s=typeof e;switch(s){case"string":try{const r=JSON.parse(JSON.parse(e).text).error.message;if(r.value){MessageBox.error(r.value)}else{MessageBox.error(r)}}catch(s){if(e.includes("Session expired.")||e.includes("authenticated")){sessionStorage.session_id=null;var t=r.getModel("i18n").getProperty("SessionExpire");t=t?t:"Session Expired.\nPlease login again.";MessageBox.error(t,{actions:[MessageBox.Action.OK],onClose:function(){window.location.href="/"}})}else{MessageBox.error(e)}}break;case"object":if(e.responseText){MessageBox.error(e.responseText);break}MessageBox.error(e.toString());break;default:MessageBox.error(e.toString());break}},onTimeZone:function(e){if(e.getTimezoneOffset()>0){e.setMinutes(e.getMinutes()+e.getTimezoneOffset())}else{e.setMinutes(e.getMinutes()-e.getTimezoneOffset())}return e}}});
//# sourceMappingURL=dbapi.js.map