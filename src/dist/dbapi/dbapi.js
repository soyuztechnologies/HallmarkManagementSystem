sap.ui.define(["jquery.sap.global"],function(e){"use strict";return{callOData:function(r,s,t,n,o,a){return new Promise(function(i,c){var u=new Date;var f=a.getModel("local").getProperty("/CurrentUser");if(t==="POST"){o.CreatedBy=f;o.ChangedBy=f;o.CreatedOn=u;o.ChangedOn=u}else if(t==="PUT"){o.ChangedBy=f;o.ChangedOn=u}if(!(r&&s&&t)){c("Invalid parameters passed")}if(!n){n={}}r.setUseBatch(false);switch(t.toUpperCase()){case"GET":r.read(s,{async:true,filters:n.filters,sorters:n.sorters,success:function(e,r){i(e)},error:function(e){c(e)}});break;case"POST":r.create(s,o,{async:true,filters:n.filters,sorters:n.sorters,success:function(e,r){i(e)},error:function(e){c(e)}});break;case"PUT":r.update(s,o,{async:true,filters:n.filters,sorters:n.sorters,success:function(e,r){debugger;i(e)},error:function(e){debugger;c(e)}});break;case"DELETE":r.remove(s,{async:true,filters:n.filters,sorters:n.sorters,success:function(e,r){i(e)},error:function(e){c(e)}});break;default:e.sap.log.error("No case matched");break}})},errorHandler:function(e,r){r.getView().setBusy(false);var s=typeof e;switch(s){case"string":try{const r=JSON.parse(JSON.parse(e).text).error.message;if(r.value){MessageBox.error(r.value)}else{MessageBox.error(r)}}catch(s){if(e.includes("Session expired.")||e.includes("authenticated")){sessionStorage.session_id=null;var t=r.getModel("i18n").getProperty("SessionExpire");t=t?t:"Session Expired.\nPlease login again.";MessageBox.error(t,{actions:[MessageBox.Action.OK],onClose:function(){window.location.href="/"}})}else{MessageBox.error(e)}}break;case"object":if(e.responseText){MessageBox.error(e.responseText);break}MessageBox.error(e.toString());break;default:MessageBox.error(e.toString());break}},onTimeZone:function(e){if(e.getTimezoneOffset()>0){e.setMinutes(e.getMinutes()+e.getTimezoneOffset())}else{e.setMinutes(e.getMinutes()-e.getTimezoneOffset())}return e}}});